# =============================================================================
# signal-trader — environment configuration
# =============================================================================
# Copy to .environment and fill in your values.
# NEVER commit .environment to git.
#
# .gitignore must contain:
#   .environment
#   *.env
#
# Usage:
#   source .environment           # manual
#   docker compose --env-file .environment up -d
#   vastai create instance ... (reads via source in vastai_train.sh)
# =============================================================================


# ── Kraken Exchange ───────────────────────────────────────────────────────────
# Create at: https://www.kraken.com/u/security/api
# Permissions required: Query Funds, Create Orders, Cancel Orders
# Permissions NEVER grant: Withdraw Funds, Transfer, Stake
KRAKEN_API_KEY=
KRAKEN_SECRET=

# Start true. Set false only at Phase 7 live sign-off.
DRY_RUN=true


# ── Anthropic ─────────────────────────────────────────────────────────────────
# Create at: https://console.anthropic.com
# Load ~€10 credit to start.
ANTHROPIC_API_KEY=


# ── Freqtrade web UI ──────────────────────────────────────────────────────────
# Credentials for the Freqtrade REST API / web dashboard.
# Used by OpenClaw skill to call the API (basic auth).
FREQTRADE_USERNAME=trader
FREQTRADE_PASSWORD=


# ── OpenClaw / Signal ─────────────────────────────────────────────────────────
# Bot phone number (second SIM or VoIP, e.g. Magenta prepaid AT).
# Format: E.164 international, e.g. +43XXXXXXXXX
OPENCLAW_BOT_NUMBER=+43XXXXXXXXX

# Your personal number — ONLY this number can send commands to the bot.
OPENCLAW_ALLOW_FROM=+43XXXXXXXXX


# ── Production server (RPi, NAS, mini-PC, ...) ───────────────────────────────
# Static LAN IP of the production host. Used to bind Freqtrade web UI to LAN only.
PROD_LAN_IP=192.168.x.x

# Tailscale IP of the prod host — used by Vast.ai to deploy the model without
# opening any inbound SSH port on your router.
# Get it by running on the prod host:  tailscale ip -4
RASPI_HOST=100.x.x.x
RASPI_USER=pi

# base64-encoded private SSH deploy key (no passphrase).
# Generate:  ssh-keygen -t ed25519 -f ~/.ssh/vastai_raspi_key -N ""
# Encode:    base64 -w0 ~/.ssh/vastai_raspi_key
# Add pub:   cat ~/.ssh/vastai_raspi_key.pub >> ~/.ssh/authorized_keys  (on prod host)
RASPI_SSH_KEY_B64=

# Tailscale auth key — allows the Vast.ai training container to join your Tailscale
# network and reach the prod host without any open inbound ports.
# Generate at: https://login.tailscale.com/admin/settings/keys
# Settings: Reusable ✓  Ephemeral ✓  (ephemeral nodes auto-remove on disconnect)
TAILSCALE_AUTH_KEY=

# Root of persistent data storage on the production host (models, signal-cli, openclaw).
# RPi with USB SSD:  /mnt/ssd
# Synology NAS:      /volume1/docker/tradbot-data   (a dedicated Docker shared folder)
DATA_ROOT=/mnt/ssd

# Path to the tradbot repo on the production host.
# deploy_stack.sh rsyncs the repo here; docker-compose.raspi.yml mounts configs from here.
# If DATA_ROOT and the repo are on the same volume, use:
#   RASPI_STACK_PATH=${DATA_ROOT}/tradbot
# If the repo lives somewhere else (e.g. NAS where repo is at /volume1/docker/tradbot
# but data is at /volume1/docker/tradbot-data), set them independently:
#   DATA_ROOT=/volume1/docker/tradbot-data
#   RASPI_STACK_PATH=/volume1/docker/tradbot
RASPI_STACK_PATH=${DATA_ROOT}/tradbot

# Path to the Freqtrade models dir on the production host (used by Vast.ai deploy).
RASPI_MODEL_PATH=${DATA_ROOT}/freqtrade/user_data/models/


# ── Vast.ai ───────────────────────────────────────────────────────────────────
# Create at: https://vast.ai/account (API Keys section).
# Load $10 credit to start.
VASTAI_API_KEY=

# Docker image for training container (build + push before first run).
# Build: docker build -f training/Dockerfile.training -t $TRAINING_IMAGE .
# Push:  docker push $TRAINING_IMAGE
TRAINING_IMAGE=ghcr.io/boernmaster/tradbot-training:latest


# ── Training parameters ───────────────────────────────────────────────────────
# Comma-separated Kraken pairs to train on.
KRAKEN_PAIRS=BTC/USDT,ETH/USDT

# Default model type: lightgbm | lstm | cnn_transformer
TRAINING_MODEL=lightgbm

# Exchange used for data download during training.
# binance = fast (standard OHLCV API, no --dl-trades needed). Good for dev and prod.
# kraken  = slow (requires --dl-trades, much longer download). Use only if you need
#           Kraken-specific order book characteristics in your features.
TRAINING_EXCHANGE=binance

# Rolling training window in days.
TRAIN_DAYS=90

# Backtest validation window in days.
BACKTEST_DAYS=30
